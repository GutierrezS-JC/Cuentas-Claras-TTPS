<app-navbar />
<div style="min-height: calc(100vh - 61.6px); background-color: #000000ed;">
  <div class="container">
    <div class="row pt-5">
      <div class="col-xl-8">

        <!-- Datos del usuario -->
        <div class="card py-2">
          <div class="card-body pb-0">
            <div class="row align-items-center">
              <div class="col-md-3">
                <div class="text-center border-end">
                  <img src="../../../assets/images/default_user.png" class="img-fluid avatar-xxl rounded-circle"
                    alt="Foto de perfil">
                </div>
              </div>
              <div class="col-md-9">
                <div class="ms-3">
                  <div class="row mb-4">
                    <div class="col-12" style="line-height: 2.5em;">
                      <h4 class="card-title mb-1 text-break main-title">{{profileUser?.name}} {{profileUser?.lastName}}
                      </h4>
                      <p class="mb-0 text-break main-username">&#64;{{profileUser?.username}}</p>
                    </div>
                  </div>
                  <hr style="color: #abababbf;" />
                  <div class="row my-2">
                    <div class="col-md-12 icons-font">
                      <p class="text-muted mb-2 fw-medium">
                        <i class="bi bi-envelope-at-fill fs-4 me-2"></i>{{profileUser?.email}}
                      </p>
                      <p class="text-muted fw-medium mb-0">
                        <i class="bi bi-telephone-fill fs-4 me-2"></i>2213456798
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="tab-content p-4">
            <section>
              <div class="d-flex align-items-center">
                <div class="flex-1">
                  <h4 class="card-title main-sub-cards mb-4">Grupos</h4>
                </div>
              </div>

              <div class="row">
                <!-- Mis grupos -->
                @for (group of groups.listOwnedGroups; track $index) {
                  <div class="col-md-6">
                    <div class="card" style="height: 11em;">
                      <div class="card-body" style="position: relative;">
  
                        <div class="mb-4">
                          <h5 class="mb-1 team-title">{{group.name}}</h5>
                          <p class="text-muted mb-0 team-description">
                            {{ group.description.length > 80 ? group.description.substring(0, 80) + '...' : group.description }}
                          </p>
                        </div>
  
                        <div class="d-flex" style="position: absolute; bottom: 20%;">
                          <div class="avatar-group float-start flex-grow-1">
                            @if(group.members.length === 0) {
                              <div class="text-muted" style="margin-left: -.5em;">
                                No hay integrantes :(
                              </div>
                            }
                            @else{
                              @for(member of group.members; track $index) {
                                <div class="avatar-group-item">
                                  <a class="d-inline-block">
                                    <img src="../../../assets/images/default_user.png" alt="mini-user"
                                      class="rounded-circle avatar-sm">
                                  </a>
                                </div>
                              }
                            }
                          </div>
                        </div>

                        <i class="bi {{group.groupCategory.base64Image}}"
                          style="font-size: 4.5em; color: rgba(0, 0, 0, 0.367); position: absolute; bottom: 0; right: 5%"></i>
                      </div>

                    </div>
                  </div>
                }

                <!-- Otros grupos -->
                @for (group of groups.listGroups; track $index) {
                  <div class="col-md-6">
                    <div class="card" style="height: 11em;">
                      <div class="card-body" style="position: relative;">
  
                        <div class="mb-4">
                          <h5 class="mb-1 team-title">{{group.name}}</h5>
                          <p class="text-muted mb-0 team-description">
                            {{ group.description.length > 80 ? group.description.substring(0, 80) + '...' : group.description }}
                          </p>
                        </div>
  
                        <div class="d-flex" style="position: absolute; bottom: 20%;">
                          <div class="avatar-group float-start flex-grow-1">
                            @if(group.members.length === 0) {
                              <div class="text-muted" style="margin-left: -.5em;">
                                No hay integrantes :(
                              </div>
                            }
                            @else{
                              @for(member of group.members; track $index) {
                                <div class="avatar-group-item">
                                  <a class="d-inline-block">
                                    <img src="../../../assets/images/default_user.png" alt="mini-user"
                                      class="rounded-circle avatar-sm">
                                  </a>
                                </div>
                              }
                            }
                          </div>
                        </div>
                      </div>

                    </div>
                  </div>
                }
              </div>
            </section>
          </div>
        </div>
      </div>

      <div class="col-xl-4">
        <div class="card">
          <div class="card-body">
            <div class="py-4">
              <h3 class="main-balance-data text-center">$50.000</h3>
              <h4 class="card-title mb-2 main-balance text-center">Gastado en el mes</h4>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-body">
            <div>
              <h4 class="card-title main-sub-cards mb-4">Contactos</h4>
              <div class="table-responsive">
                <table class="table table-striped table-hover table-bordered mb-0">
                  <thead class="table-secondary">
                    <tr>
                      <th scope="col">Nombre</th>
                      <th scope="col">Username</th>
                      <th scope="col">Fecha</th>
                    </tr>
                  </thead>
                  <tbody class="table-group-divider">
                    @for (contact of contacts; track $index) {
                      <tr>
                        <td>{{contact.user.name}} {{contact.user.lastName}}</td>
                        <td>{{contact.user.username}}</td>
                        <td>{{contact.contactSince | date: 'dd/MM/yyyy'}}</td>
                      </tr>
                    }
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>